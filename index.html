<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bioética e Clonagem</title>
    <!-- Adiciona o Tailwind CSS para o estilo -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Adiciona a biblioteca three.js para a animação 3D -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@700;800;900&family=Lato:wght@400;500;600&display=swap');
        
        :root {
            --purple-500: #8A2BE2;
            --pink-500: #E91E63;
            --green-500: #4CAF50;
            --red-500: #F44336;
        }

        body {
            font-family: 'Lato', sans-serif;
            overflow-x: hidden;
            background-color: #0c0a09; /* Cor de fundo principal */
        }
        .font-poppins {
            font-family: 'Poppins', sans-serif;
        }
        .font-lato {
            font-family: 'Lato', sans-serif;
        }
        
        .ios-card {
            background-color: rgba(255, 255, 255, 0.08); /* Fundo semi-transparente */
            backdrop-filter: blur(25px); /* Efeito de vidro fosco aprimorado */
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid transparent;
            position: relative;
            transition: transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1), box-shadow 0.4s, border-color 0.4s;
            overflow: hidden;
        }
        .ios-card:hover {
            transform: translateY(-4px) scale(1.01);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
            border-color: rgba(255, 255, 255, 0.2);
        }
        
        /* Animação para a entrada das seções */
        .fade-in {
            animation: fadeIn 1s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- Melhoria do Layout Inicial --- */
        
        /* Animação para a mensagem de entrada pulsante */
        @keyframes pulse-fade {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.02); }
        }
        
        #loading-message {
            animation: pulse-fade 2s infinite ease-in-out;
            padding: 1rem 2rem;
            border-radius: 9999px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        #loading-screen {
            background-color: #0c0a09; /* Garantia de opacidade total */
        }
        
        /* Estilos do Quiz (Modo Interativo) */
        .quiz-option {
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            transform: scale(1);
        }
        .quiz-option:hover:not(.correct, .incorrect) {
            transform: scale(1.02);
            border-color: var(--purple-500);
            background-color: rgba(138, 43, 226, 0.1);
        }
        .quiz-option.correct {
            background-color: rgba(76, 175, 80, 0.2);
            border-color: var(--green-500);
            transform: scale(1.03);
            animation: correct-answer 0.5s ease-out;
        }
        .quiz-option.incorrect {
            background-color: rgba(244, 67, 54, 0.2);
            border-color: var(--red-500);
            transform: scale(1.03);
            animation: incorrect-answer 0.5s ease-out;
        }
        
        @keyframes correct-answer {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1.03); }
        }
        @keyframes incorrect-answer {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }
        
        /* Estilos do Modal (genéricos) */
        .modal-hidden {
            opacity: 0;
            pointer-events: none;
            display: none;
        }
        .modal-visible {
            opacity: 1;
            pointer-events: auto;
            display: flex;
        }

        /* Estilos específicos para o Modal de Slides */
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid var(--purple-500);
            border-radius: 50%;
            width: 50px; /* Aumentado */
            height: 50px; /* Aumentado */
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-950 text-gray-200">

    <!-- Container para o fundo 3D -->
    <div id="3d-background" class="fixed inset-0 z-0">
        <canvas id="main-3d-canvas" class="w-full h-full"></canvas>
    </div>

    <!-- Tela de pré-carregamento inicial -->
    <div id="loading-screen" class="fixed inset-0 flex flex-col justify-center items-center z-50 transition-opacity duration-1000 bg-gray-950">
        
        <!-- Novo Título Principal -->
        <h1 class="text-7xl md:text-8xl font-extrabold font-poppins tracking-tighter bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-600 drop-shadow-2xl mb-12">
            CYBER ÉTICA
        </h1>

        <!-- Mensagem de entrada aprimorada com pulsação -->
        <div id="loading-message" class="text-xl md:text-2xl text-gray-300 flex items-center gap-3 p-3 rounded-full bg-gray-800/50 backdrop-blur-sm cursor-pointer border border-purple-500/50 hover:bg-gray-700/70">
            <!-- Ícone de Mão/Clique -->
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" fill="currentColor" class="w-6 h-6 text-pink-400">
                <path d="M128,144a8,8,0,0,1-8-8V80a8,8,0,0,1,16,0v56A8,8,0,0,1,128,144Zm40-8a8,8,0,0,0-16,0v40a8,8,0,0,0,16,0Zm-80,0a8,8,0,0,0-16,0v40a8,8,0,0,0,16,0ZM224,128a96,96,0,1,1-96-96A96.11,96.11,0,0,1,224,128Zm-16,0a80,80,0,1,0-80,80A80.09,80.09,0,0,0,208,128Z"></path>
            </svg>
            <span class="font-poppins font-semibold">Pressione qualquer tecla ou clique para iniciar</span>
        </div>
    </div>

    <!-- Conteúdo principal -->
    <div id="main-content" class="opacity-0 pointer-events-none transition-opacity duration-1000">
        
        <!-- Header com MENU REFINADO e efeito de vidro fosco -->
        <header id="main-header" class="sticky top-0 z-50 py-4 px-4 bg-gray-950/70 backdrop-blur-xl border-b border-gray-800 shadow-lg relative">
            <div class="container mx-auto flex flex-col sm:flex-row justify-between items-center">
                <h1 class="text-3xl sm:text-4xl font-extrabold font-poppins tracking-wide bg-clip-text text-transparent bg-gradient-to-r from-purple-500 to-pink-500 drop-shadow-lg mb-4 sm:mb-0">Bioética & Clonagem</h1>
                
                <!-- Menu de Navegação - Segmentado (Mais clean) -->
                <nav class="flex items-center space-x-2 p-1 rounded-full bg-gray-800/50 border border-gray-700">
                    
                    <a href="#intro" class="group flex items-center justify-center gap-1 text-gray-300 hover:text-white transition-all duration-300 px-4 py-2 rounded-full hover:bg-purple-600/30">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" fill="currentColor" class="w-5 h-5"><path d="M240,128a15.93,15.93,0,0,1-4.66,11.31l-80,80A16,16,0,0,1,128,216a15.86,15.86,0,0,1-7.22-1.78l-80-40A16,16,0,0,1,32,160V96a16,16,0,0,1,8.78-14.22l80-40A16,16,0,0,1,128,40a15.93,15.93,0,0,1,11.31,4.66l80,80A16,16,0,0,1,240,128ZM128,51.34l71.21,71.22L128,193.66,56.79,122.45Z"></path></svg>
                        <span class="font-lato hidden sm:inline">Introdução</span>
                    </a>

                    <!-- BOTÃO DE SLIDES AGORA ABRE O MODAL ALTERNATIVO -->
                    <button onclick="openSlidesModal()"
                        class="group flex items-center justify-center gap-1 text-gray-300 hover:text-white transition-all duration-300 px-4 py-2 rounded-full hover:bg-pink-600/30">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" fill="currentColor" class="w-5 h-5"><path d="M224,192V64a16,16,0,0,0-16-16H48A16,16,0,0,0,32,64V192a16,16,0,0,0,16,16H208A16,16,0,0,0,224,192Zm-16,0H48V64H208Z"></path></svg>
                        <span class="font-lato hidden sm:inline">Visualizar Slides</span>
                    </button>
                    
                    <!-- BOTÃO PARA ABRIR O MODAL DO QUIZ -->
                    <button onclick="openQuizModal()" class="group flex items-center justify-center gap-1 text-gray-300 hover:text-white transition-all duration-300 px-4 py-2 rounded-full bg-pink-600/50 hover:bg-pink-600">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" fill="currentColor" class="w-5 h-5"><path d="M208,128a8,8,0,0,1-8,8H176v32a8,8,0,0,1-16,0V136H96v32a8,8,0,0,1-16,0V136H48a8,8,0,0,1,0-16H80V88a8,8,0,0,1,16,0v32h64V88a8,8,0,0,1,16,0v32h32A8,8,0,0,1,208,128Z"></path></svg>
                        <span class="font-lato font-bold">Quiz</span>
                    </button>
                    
                    <a href="#futuro" class="group flex items-center justify-center gap-1 text-gray-300 hover:text-white transition-all duration-300 px-4 py-2 rounded-full hover:bg-purple-600/30">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" fill="currentColor" class="w-5 h-5"><path d="M224,128a96,96,0,1,1-96-96A96.11,96.11,0,0,1,224,128Zm-16,0a80,80,0,1,0-80,80A80.09,80.09,0,0,0,208,128ZM164.71,91.29a8,8,0,0,0-11.42,0L136,108.59V80a8,8,0,0,0-16,0v28.59L102.71,91.29a8,8,0,0,0-11.42,11.42l24,24a8.17,8.17,0,0,0,5.69,2.22A8.17,8.17,0,0,0,128,127.29l24-24A8,8,0,0,0,164.71,91.29Z"></path></svg>
                        <span class="font-lato hidden sm:inline">O Futuro</span>
                    </a>

                    <button onclick="document.getElementById('settings-modal').style.display='flex';" class="group flex items-center justify-center gap-1 text-gray-300 hover:text-white transition-all duration-300 px-2 py-2 rounded-full hover:bg-purple-600/30">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" fill="currentColor" class="w-6 h-6"><path d="M213.66,138.34a8,8,0,0,1,0,11.32l-56,56A8,8,0,0,1,144,200v-24H40a8,8,0,0,1,0-16h104V104a8,8,0,0,1,13.66-5.66l56,56A8,8,0,0,1,213.66,138.34Z"></path></svg>
                    </button>
                </nav>
            </div>
        </header>

        <!-- Modal de Configurações (Mantido) -->
        <div id="settings-modal" class="fixed inset-0 z-[60] hidden justify-center items-center bg-black/80 backdrop-blur-md">
            <div class="ios-card rounded-3xl p-8 shadow-2xl w-full max-w-lg mx-4">
                <h2 class="text-2xl font-bold font-poppins text-white mb-4">Configurações</h2>
                <p class="text-gray-400 mb-6 font-lato">As animações 3D estão pré-definidas para funcionar offline.</p>
                
                <div id="display-mode" class="space-y-6 bg-gray-800 p-6 rounded-2xl">
                    <h3 class="text-xl font-semibold font-poppins text-white mb-3">Modo de Exibição</h3>
                    <button id="fullscreen-button" onclick="toggleFullscreen()" class="w-full px-4 py-2 rounded-lg bg-purple-600 text-white font-semibold hover:bg-purple-700 transition-colors duration-200">
                        Entrar em Tela Cheia
                    </button>
                </div>

                <button onclick="document.getElementById('settings-modal').style.display='none';" class="w-full px-4 py-2 rounded-lg bg-gray-700 text-white font-semibold hover:bg-gray-800 transition-colors duration-200 mt-8">
                    Fechar
                </button>
            </div>
        </div>

        <!-- Conteúdo principal -->
        <main class="container mx-auto p-6 md:p-8 space-y-24 relative z-10">
            <!-- Seção de Introdução -->
            <section id="intro" class="ios-card rounded-3xl p-8 shadow-2xl fade-in">
                <h2 class="text-4xl font-bold font-poppins text-white mb-4 drop-shadow-md">
                    A Introdução à Bioética
                </h2>
                <p class="text-gray-300 leading-relaxed text-lg font-lato">
                    A **bioética** é o estudo sistemático das dimensões morais e das decisões relacionadas à vida. Em sua essência, ela explora os dilemas éticos que surgem com os avanços da ciência e da tecnologia, especialmente na medicina e biologia.
                </p>
            </section>

            <!-- Seção sobre Clonagem -->
            <section id="clonagem" class="fade-in" style="animation-delay: 0.2s;">
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="ios-card rounded-3xl p-8 shadow-2xl">
                        <h3 class="text-2xl font-bold font-poppins text-white mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" fill="currentColor" class="inline-block w-6 h-6 mr-2"><path d="M140,24a12,12,0,0,0-12,12V68H64a12,12,0,0,0-12,12v72a12,12,0,0,0,12,12H96v48a12,12,0,0,0,12,12h48a12,12,0,0,0,12-12V164h32a12,12,0,0,0,12-12V80a12,12,0,0,0-12-12H152V36A12,12,0,0,0,140,24ZM64,152V88h64v64Zm48,40V164h32v28Zm80-28H164V88h40Z"></path></svg>
                            O que é Clonagem?
                        </h3>
                        <p class="text-gray-300 leading-relaxed font-lato">
                            **Clonagem** refere-se à criação de uma cópia geneticamente idêntica de um ser vivo. Este processo pode ocorrer naturalmente, como em bactérias e plantas, ou ser induzido em laboratório, como a famosa Ovelha Dolly.
                        </p>
                    </div>
                    <div class="ios-card rounded-3xl p-8 shadow-2xl">
                        <h3 class="text-2xl font-bold font-poppins text-white mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" fill="currentColor" class="inline-block w-6 h-6 mr-2"><path d="M128,104a24,24,0,1,1-24,24A24,24,0,0,1,128,104Zm112,24A112,112,0,1,1,128,16,112,112,0,0,1,240,128ZM128,32a96,96,0,1,0,96,96A96.11,96.11,0,0,0,128,32Z"></path></svg>
                            Tipos de Clonagem
                        </h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-300 leading-relaxed font-lato">
                            <li>
                                <strong class="text-white">Clonagem Terapêutica:</strong> Criação de embriões para obtenção de células-tronco, visando o tratamento de doenças (não resulta em um indivíduo completo).
                            </li>
                            <li>
                                <strong class="text-white">Clonagem Reprodutiva:</strong> Produção de um organismo completo, geneticamente idêntico a outro. É o tipo que levanta mais dilemas éticos.
                            </li>
                        </ul>
                    </div>
                </div>
            </section>
            
            <!-- Seção de Questões Éticas (mantida) -->
            <section id="questoes-eticas" class="ios-card rounded-3xl p-8 shadow-2xl fade-in" style="animation-delay: 0.4s;">
                <h2 class="text-3xl font-bold font-poppins text-white mb-4 drop-shadow-md">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" fill="currentColor" class="inline-block w-6 h-6 mr-2"><path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216ZM128,96a8,8,0,0,1,8,8v40a8,8,0,0,1-16,0V104A8,8,0,0,1,128,96ZM128,172a12,12,0,1,1,12-12A12,12,0,0,1,128,172Z"></path></svg>
                    Questões Éticas e Filosóficas
                </h2>
                <p class="text-gray-300 leading-relaxed text-lg mb-6 font-lato">
                    A clonagem, especialmente a reprodutiva, levanta profundas questões morais.
                </p>
                <div class="grid md:grid-cols-3 gap-6">
                    <div class="sub-card bg-gray-800 rounded-xl p-6 shadow-xl hover:bg-gray-700 transition-colors duration-200">
                        <h4 class="text-xl font-semibold font-poppins text-white mb-2">Dignidade Humana</h4>
                        <p class="text-gray-400 font-lato">
                            O clone seria uma pessoa com a mesma dignidade? A clonagem diminui o valor da vida humana?
                        </p>
                    </div>
                    <div class="sub-card bg-gray-800 rounded-xl p-6 shadow-xl hover:bg-gray-700 transition-colors duration-200">
                        <h4 class="text-xl font-semibold font-poppins text-white mb-2">Identidade e Unicidade</h4>
                        <p class="text-gray-400 font-lato">
                            A clonagem poderia prejudicar a unicidade de um indivíduo, gerando conflitos de identidade?
                        </p>
                    </div>
                    <div class="sub-card bg-gray-800 rounded-xl p-6 shadow-xl hover:bg-gray-700 transition-colors duration-200">
                        <h4 class="text-xl font-semibold font-poppins text-white mb-2">Uso Indevido</h4>
                        <p class="text-gray-400 font-lato">
                            Há o risco de clonagem com fins utilitários, como a criação de "peças de reposição"?
                        </p>
                    </div>
                </div>
            </section>

            <!-- Seção O Futuro -->
            <section id="futuro" class="ios-card rounded-3xl p-8 shadow-2xl fade-in" style="animation-delay: 0.6s;">
                <h2 class="text-3xl font-bold font-poppins text-white mb-4 drop-shadow-md">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" fill="currentColor" class="inline-block w-6 h-6 mr-2"><path d="M224,128a96,96,0,1,1-96-96A96.11,96.11,0,0,1,224,128Zm-16,0a80,80,0,1,0-80,80A80.09,80.09,0,0,0,208,128ZM164.71,91.29a8,8,0,0,0-11.42,0L136,108.59V80a8,8,0,0,0-16,0v28.59L102.71,91.29a8,8,0,0,0-11.42,11.42l24,24a8.17,8.17,0,0,0,5.69,2.22A8.17,8.17,0,0,0,128,127.29l24-24A8,8,0,0,0,164.71,91.29Z"></path></path></svg>
                    O Futuro da Bioética
                </h2>
                <p class="text-gray-300 leading-relaxed text-lg font-lato">
                    Com o avanço da genética e da engenharia biológica, a **bioética** continua a ser um campo crucial para orientar a sociedade. É essencial que o diálogo sobre esses temas permaneça aberto e inclusivo, garantindo que o progresso científico caminhe lado a lado com a responsabilidade ética.
                </p>
            </section>
        </main>
        
        <footer class="text-center text-gray-500 p-6 border-t border-gray-800 mt-24">
            <p>Desenvolvido com foco em estética e modernidade.</p>
        </footer>
    </div>
    
    <!-- MODAL DE SLIDES (NOVA VERSÃO COM IFRAME) -->
    <div id="slides-modal" class="fixed inset-0 z-[80] modal-hidden justify-center items-center bg-black/90 backdrop-blur-xl p-4 transition-opacity duration-300">
        <div class="ios-card rounded-3xl p-6 shadow-2xl w-full max-w-6xl h-[90vh] flex flex-col">
            <div class="flex justify-between items-center pb-3 mb-4 border-b border-gray-700 flex-shrink-0">
                <h2 class="text-xl sm:text-2xl font-bold font-poppins text-white flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" fill="currentColor" class="w-6 h-6 text-pink-500"><path d="M224,192V64a16,16,0,0,0-16-16H48A16,16,0,0,0,32,64V192a16,16,0,0,0,16,16H208A16,16,0,0,0,224,192Zm-16,0H48V64H208Z"></path></svg>
                    Apresentação de Slides
                </h2>
                <button onclick="closeSlidesModal()" class="text-gray-400 hover:text-white transition-colors duration-200">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" fill="currentColor" class="w-6 h-6"><path d="M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66a8,8,0,0,1,11.32-11.32L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"></path></svg>
                </button>
            </div>
            
            <!-- Conteúdo do Iframe e Fallback -->
            <div id="iframe-container" class="relative flex-grow bg-gray-900 rounded-2xl overflow-hidden">
                <!-- Spinner de Carregamento (estilo iOS) -->
                <div id="loading-spinner" class="absolute inset-0 flex flex-col justify-center items-center bg-gray-900/80 backdrop-blur-sm z-10">
                    <div class="spinner"></div>
                    <p class="mt-4 text-lg text-gray-300 font-poppins tracking-wider">Carregando Apresentação...</p>
                </div>

                <!-- Fallback -->
                <div id="fallback-message" class="absolute inset-0 flex flex-col justify-center items-center p-8 text-center hidden">
                    <p class="text-lg font-semibold text-red-400 mb-4">
                        Não foi possível carregar o slide.
                    </p>
                    <p class="text-gray-300 mb-8 font-lato">
                        O Canva pode estar bloqueando a visualização direta. Por favor, use o botão abaixo para abrir em uma nova aba.
                    </p>
                    <a href="https://www.canva.com/design/DAG0i5NC_oo/A-V3masHTyCacF7CVq9h_w/view" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center gap-2 px-6 py-3 rounded-xl bg-pink-600 text-white font-bold text-lg hover:bg-pink-700 transition-colors duration-300 shadow-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" fill="currentColor" class="w-6 h-6"><path d="M216,128a8,8,0,0,1-8,8H176v32a8,8,0,0,1-16,0V136H48A16,16,0,0,1,32,120V48A16,16,0,0,1,48,32H168a16,16,0,0,1,16,16v32h32a8,8,0,0,1,0,16ZM168,104V56H48v64H168Z"></path></svg>
                        Abrir em Nova Aba
                    </a>
                </div>

                <!-- Iframe para os slides -->
                <iframe id="slide-iframe" class="w-full h-full border-0 hidden"
                        src="about:blank"
                        allowfullscreen="true" allow="fullscreen">
                </iframe>
            </div>
        </div>
    </div>
    
    <!-- QUIZ MODAL (MODO APRESENTAÇÃO E INTERATIVO) -->
    <div id="quiz-modal" class="fixed inset-0 z-[70] modal-hidden justify-center items-center bg-black/90 backdrop-blur-xl p-4 transition-opacity duration-300 overflow-y-auto">
        <div class="ios-card rounded-3xl p-8 shadow-2xl w-full max-w-4xl mx-auto my-auto min-h-[80vh] flex flex-col">
            <!-- Título do Modal e Botão Fechar -->
            <div class="flex justify-between items-center pb-4 border-b border-gray-700 mb-6 flex-shrink-0">
                <h2 id="quiz-main-title" class="text-3xl sm:text-4xl font-bold font-poppins bg-clip-text text-transparent bg-gradient-to-r from-purple-500 to-pink-500 drop-shadow-md">
                    Quiz
                </h2>
                <button onclick="closeQuizModal()" class="text-gray-400 hover:text-white transition-colors duration-200">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" fill="currentColor" class="w-8 h-8"><path d="M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66a8,8,0,0,1,11.32-11.32L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"></path></svg>
                </button>
            </div>
            
            <div id="quiz-content-area" class="flex-grow overflow-hidden flex flex-col">
                <!-- 1. Seleção de Modo -->
                <div id="mode-selection">
                    <p class="text-lg text-gray-300 font-lato mb-4">Escolha o formato do Quiz:</p>
                    <div class="flex flex-col sm:flex-row gap-4">
                        <button onclick="selectMode('interactive')" class="ios-card sub-card flex-1 px-6 py-4 rounded-xl bg-purple-600/30 text-white font-bold text-xl hover:bg-purple-600/50 transition-colors duration-300">
                            Quiz Interativo
                        </button>
                        <button onclick="selectMode('presentation')" class="ios-card sub-card flex-1 px-6 py-4 rounded-xl bg-pink-600/30 text-white font-bold text-xl hover:bg-pink-600/50 transition-colors duration-300">
                            Modo Apresentação
                        </button>
                    </div>
                </div>

                <!-- 2. Seleção de Tópico (Oculto inicialmente) -->
                <div id="topic-selection" class="hidden">
                    <p class="text-lg text-gray-300 font-lato mb-4">Escolha o tópico:</p>
                    <div class="flex flex-col sm:flex-row gap-4">
                        <button onclick="startQuiz('bioetica')" class="ios-card sub-card flex-1 px-6 py-4 rounded-xl bg-purple-600/30 text-white font-bold text-xl hover:bg-purple-600/50 transition-colors duration-300">
                            Bioética
                        </button>
                        <button onclick="startQuiz('clonagem')" class="ios-card sub-card flex-1 px-6 py-4 rounded-xl bg-pink-600/30 text-white font-bold text-xl hover:bg-pink-600/50 transition-colors duration-300">
                            Clonagem
                        </button>
                    </div>
                </div>

                <!-- 3. Área de Exibição do Quiz (Modo Apresentação) -->
                <div id="quiz-display-area" class="hidden flex-grow overflow-y-auto pr-4">
                    <div class="flex justify-between items-center mb-6 sticky top-0 bg-gray-950/80 backdrop-blur-sm py-2 z-10">
                        <h3 id="quiz-topic-title-display" class="text-2xl font-bold font-poppins text-white"></h3>
                        <button id="reveal-answers-button" onclick="revealAnswers()" class="px-4 py-2 rounded-full bg-green-600 text-white font-semibold hover:bg-green-700 transition-colors duration-300">
                            Revelar Respostas
                        </button>
                    </div>
                    <div id="questions-list" class="space-y-8">
                        <!-- Perguntas serão injetadas aqui -->
                    </div>
                </div>
                
                <!-- 4. Área do Quiz Interativo -->
                <div id="quiz-interactive-area" class="hidden">
                    <h3 id="quiz-topic-title-interactive" class="text-2xl font-bold font-poppins text-white mb-6"></h3>
                    <div class="bg-gray-800 p-6 rounded-2xl shadow-inner mb-6">
                        <p id="question-text" class="text-xl font-semibold text-white mb-4"></p>
                    </div>
                    <div id="options-container" class="space-y-3"></div>
                    <div class="mt-8 pt-4 border-t border-gray-700">
                        <div id="feedback-message" class="text-lg font-bold min-h-[3rem] flex flex-col gap-2 items-start justify-center"></div>
                        <div class="flex justify-end mt-4">
                            <button id="next-button" onclick="nextQuestion()" class="px-6 py-3 rounded-full bg-gray-700 text-white font-semibold hover:bg-gray-600 transition-colors duration-300 opacity-50 cursor-not-allowed" disabled>
                                Próxima Pergunta
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 5. Área de Resultado (Quiz Interativo) -->
                <div id="result-area" class="hidden text-center p-8">
                    <h3 class="text-4xl font-extrabold font-poppins text-white mb-4">Resultado Final</h3>
                    <p id="result-score" class="text-6xl font-bold font-poppins bg-clip-text text-transparent bg-gradient-to-r from-green-400 to-purple-400 mb-6"></p>
                    <p class="text-lg text-gray-300 font-lato mb-8">Parabéns por completar o quiz!</p>
                    <button onclick="resetQuiz()" class="px-6 py-3 rounded-full bg-pink-600 text-white font-semibold hover:bg-pink-700 transition-colors duration-300">
                        Fazer Outro Quiz
                    </button>
                </div>
            </div>
            
            <!-- Botão de Voltar/Sair no rodapé do modal -->
            <div class="pt-4 mt-auto flex-shrink-0">
                 <button id="quiz-back-button" onclick="goBack()" class="w-full px-4 py-3 rounded-lg bg-gray-700 text-white font-semibold hover:bg-gray-600 transition-colors duration-200 hidden">
                        Voltar
                 </button>
                 <button id="quiz-close-button" onclick="closeQuizModal()" class="w-full px-4 py-3 rounded-lg bg-gray-700 text-white font-semibold hover:bg-gray-600 transition-colors duration-200">
                        Sair do Quiz
                 </button>
            </div>
        </div>
    </div>
    
    <!-- Script para a animação 3D e funcionalidades e QUIZ -->
    <script type="module">
        // --- Estrutura de Dados do Quiz ---
        const quizQuestions = {
            bioetica: [
                {
                    q: "Qual dos seguintes conjuntos representa os quatro pilares do Principialismo na Bioética (o referencial mais comum para decisões médicas)?",
                    options: [
                        { text: "Dignidade, Liberdade, Igualdade, Fraternidade.", correct: false, reasoning: "Estes são princípios sociais, não os quatro pilares éticos centrais do Principialismo." },
                        { text: "Autonomia, Beneficência, Não Maleficência, Justiça.", correct: true, reasoning: "Estes são os quatro princípios fundamentais que guiam a tomada de decisão bioética em ambientes clínicos." },
                        { text: "Utilidade, Consentimento, Segredo, Competência.", correct: false, reasoning: "Estes são conceitos importantes, mas não constituem os quatro pilares básicos do Principialismo." }
                    ]
                },
                {
                    q: "Em relação à eutanásia em casos terminais, qual argumento é frequentemente invocado pela Bioética a favor da prática?",
                    options: [
                        { text: "O princípio da Beneficência, que exige a preservação da vida a qualquer custo.", correct: false, reasoning: "A beneficência busca o bem, mas a autonomia do paciente tem peso superior em decisões de fim de vida." },
                        { text: "O princípio da Não Maleficência, argumentando que a morte é sempre um dano.", correct: false, reasoning: "Embora importante, em casos de sofrimento extremo, a Não Maleficência pode ser interpretada como 'não prolongar o dano'." },
                        { text: "O princípio da Autonomia, que defende o direito do paciente de decidir sobre o fim de seu sofrimento.", correct: true, reasoning: "A autonomia é crucial. Defende o direito do paciente capaz de decidir sobre tratamentos e, em algumas jurisdições, sobre o fim da própria vida." }
                    ]
                },
                {
                    q: "Qual é o principal dilema ético na pesquisa com células-tronco embrionárias, de acordo com a Bioética?",
                    options: [
                        { text: "A dificuldade técnica de isolar as células.", correct: false, reasoning: "É um desafio prático, não um dilema ético." },
                        { text: "O uso e a destruição potencial de embriões humanos, que alguns consideram vida.", correct: true, reasoning: "O debate central é o estatuto moral do embrião humano e a sua potencial destruição para fins terapêuticos." },
                        { text: "A proibição de patentear as linhagens celulares resultantes.", correct: false, reasoning: "É uma questão legal e econômica, não o dilema ético principal." }
                    ]
                },
                {
                    q: "A manipulação genética de linhagem germinativa (alteração do DNA que pode ser herdada) levanta a preocupação ética de:",
                    options: [
                        { text: "Atrasar a descoberta de novos antibióticos.", correct: false, reasoning: "Não há relação direta entre a manipulação germinativa e a pesquisa de antibióticos." },
                        { text: "Abrir caminho para a eugenia e a criação de 'bebês sob encomenda' (designer babies).", correct: true, reasoning: "A preocupação é com a seleção de características e a transmissão dessas alterações para as futuras gerações." },
                        { text: "Violar o princípio da Beneficência ao curar doenças.", correct: false, reasoning: "Curar doenças seria uma forma de beneficência, o dilema está nos meios e nas implicações sociais." }
                    ]
                }
            ],
            clonagem: [
                {
                    q: "Qual a principal diferença de objetivo entre a Clonagem Terapêutica e a Clonagem Reprodutiva?",
                    options: [
                        { text: "A terapêutica usa embriões, a reprodutiva usa apenas células adultas.", correct: false, reasoning: "Ambas podem usar células adultas (SCNT), mas o objetivo é o que as diferencia." },
                        { text: "A terapêutica visa a criação de células/tecidos, a reprodutiva visa a criação de um organismo completo.", correct: true, reasoning: "Clonagem Terapêutica cria tecidos para tratamento; Reprodutiva cria um novo ser vivo completo." },
                        { text: "A terapêutica é legal em todos os países, a reprodutiva é ilegal em todos.", correct: false, reasoning: "A legalidade varia por país; o foco da diferença é o objetivo biológico." }
                    ]
                },
                {
                    q: "Qual é a implicação ética e social mais citada contra a permissão da clonagem de seres humanos?",
                    options: [
                        { text: "O alto consumo de energia dos equipamentos de laboratório.", correct: false, reasoning: "Esta é uma preocupação de custo, não a principal preocupação ética e social." },
                        { text: "A violação da unicidade e dignidade do ser humano clonado e a potencial instrumentalização da vida.", correct: true, reasoning: "O principal temor é a transformação da vida humana em um objeto 'fabricado' ou a perda de singularidade." },
                        { text: "A dificuldade de encontrar mães de aluguel dispostas a participar.", correct: false, reasoning: "Embora seja uma questão prática, não é a principal objeção ética." }
                    ]
                },
                {
                    q: "Um risco biológico chave associado à clonagem de animais é:",
                    options: [
                        { text: "A inabilidade do clone de se reproduzir.", correct: false, reasoning: "A fertilidade não é o principal risco biológico imediato." },
                        { text: "A alta taxa de insucesso gestacional e a baixa expectativa de vida dos clones resultantes.", correct: true, reasoning: "O SCNT (Transferência Nuclear de Células Somáticas) ainda resulta em altas taxas de anomalias, abortos e saúde frágil." },
                        { text: "A perda de pelos ou penas após o nascimento.", correct: false, reasoning: "Não é um risco biológico comum ou grave." }
                    ]
                },
                {
                    q: "A clonagem de órgãos humanos (como parte da Clonagem Terapêutica) para transplantes resolveria qual problema ético/prático do sistema atual?",
                    options: [
                        { text: "O custo elevado dos medicamentos pós-transplante.", correct: false, reasoning: "O custo não seria resolvido; a questão é biológica." },
                        { text: "A escassez de doadores compatíveis e a necessidade de imunossupressão.", correct: true, reasoning: "O órgão clonado seria geneticamente idêntico ao paciente, eliminando a rejeição e a necessidade de imunossupressores." },
                        { text: "O tempo de espera para a realização da cirurgia.", correct: false, reasoning: "O tempo de espera para o *crescimento* do órgão ainda seria um fator limitante." }
                    ]
                }
            ]
        };

        // --- Variáveis e Funções para o Modal de SLIDES ---
        const slidesModal = document.getElementById('slides-modal');
        const slideIframe = document.getElementById('slide-iframe');
        const loadingSpinner = document.getElementById('loading-spinner');
        const fallbackMessage = document.getElementById('fallback-message');
        const SLIDES_EMBED_URL = "https://www.canva.com/design/DAG0i5NC_oo/A-V3masHTyCacF7CVq9h_w/view?embed";

        window.openSlidesModal = () => {
            slidesModal.classList.remove('modal-hidden');
            slidesModal.classList.add('modal-visible');
            loadingSpinner.style.display = 'flex';
            slideIframe.style.display = 'none';
            fallbackMessage.style.display = 'none';
            slideIframe.src = 'about:blank';
            let iframeLoaded = false;
            slideIframe.onload = () => {
                iframeLoaded = true;
                loadingSpinner.style.display = 'none';
                slideIframe.style.display = 'block';
            };
            slideIframe.src = SLIDES_EMBED_URL;
            setTimeout(() => {
                if (!iframeLoaded) {
                    loadingSpinner.style.display = 'none';
                    fallbackMessage.style.display = 'flex';
                }
            }, 5000);
        };

        window.closeSlidesModal = () => {
            slideIframe.src = 'about:blank';
            slidesModal.classList.remove('modal-visible');
            slidesModal.classList.add('modal-hidden');
        };

        // --- Gerenciamento do Quiz ---
        // Elementos do DOM
        const quizModal = document.getElementById('quiz-modal');
        const modeSelection = document.getElementById('mode-selection');
        const topicSelection = document.getElementById('topic-selection');
        const quizDisplayArea = document.getElementById('quiz-display-area');
        const quizInteractiveArea = document.getElementById('quiz-interactive-area');
        const resultArea = document.getElementById('result-area');
        const quizBackButton = document.getElementById('quiz-back-button');
        const quizCloseButton = document.getElementById('quiz-close-button');
        
        // Variáveis de Estado
        let quizMode = ''; // 'interactive' or 'presentation'
        let currentTopic = '';
        let currentQuestionIndex = 0;
        let score = 0;
        let isAnswered = false;
        let quizState = 'mode'; // 'mode', 'topic', 'active'

        // Funções de Navegação e Estado
        window.openQuizModal = () => {
            quizModal.classList.remove('modal-hidden');
            quizModal.classList.add('modal-visible');
            resetQuiz();
        };

        window.closeQuizModal = () => {
            quizModal.classList.remove('modal-visible');
            quizModal.classList.add('modal-hidden');
        };

        window.selectMode = (mode) => {
            quizMode = mode;
            quizState = 'topic';
            updateQuizView();
        };

        window.startQuiz = (topic) => {
            currentTopic = topic;
            quizState = 'active';
            if (quizMode === 'interactive') {
                currentQuestionIndex = 0;
                score = 0;
                isAnswered = false;
                loadInteractiveQuestion();
            } else {
                loadPresentationQuiz();
            }
            updateQuizView();
        };
        
        window.resetQuiz = () => {
            quizState = 'mode';
            quizMode = '';
            currentTopic = '';
            updateQuizView();
        };
        
        window.goBack = () => {
            if (quizState === 'active') {
                quizState = 'topic';
            } else if (quizState === 'topic') {
                quizState = 'mode';
            }
            updateQuizView();
        };

        function updateQuizView() {
            // Esconde todas as seções
            modeSelection.classList.add('hidden');
            topicSelection.classList.add('hidden');
            quizDisplayArea.classList.add('hidden');
            quizInteractiveArea.classList.add('hidden');
            resultArea.classList.add('hidden');
            quizBackButton.classList.add('hidden');
            quizCloseButton.classList.remove('hidden');

            if (quizState === 'mode') {
                modeSelection.classList.remove('hidden');
            } else if (quizState === 'topic') {
                topicSelection.classList.remove('hidden');
                quizBackButton.classList.remove('hidden');
                quizCloseButton.classList.add('hidden');
            } else if (quizState === 'active') {
                quizBackButton.classList.remove('hidden');
                quizCloseButton.classList.add('hidden');
                if (quizMode === 'interactive') {
                    quizInteractiveArea.classList.remove('hidden');
                } else {
                    quizDisplayArea.classList.remove('hidden');
                }
            }
        }
        
        // --- Lógica do Modo Apresentação ---
        const quizTopicTitleDisplay = document.getElementById('quiz-topic-title-display');
        const questionsList = document.getElementById('questions-list');
        const revealBtn = document.getElementById('reveal-answers-button');
        
        function loadPresentationQuiz() {
            quizTopicTitleDisplay.textContent = currentTopic === 'bioetica' ? 'Tópico: Bioética' : 'Tópico: Clonagem';
            questionsList.innerHTML = '';
            revealBtn.style.display = 'block';

            const questions = quizQuestions[currentTopic];
            questions.forEach((q, index) => {
                const questionBlock = document.createElement('div');
                questionBlock.className = 'bg-gray-800/50 p-6 rounded-2xl shadow-inner';
                questionBlock.innerHTML = `
                    <p class="text-xl font-semibold text-white mb-4">
                        <span class="text-purple-400 font-bold">Q${index + 1}:</span> ${q.q}
                    </p>
                    <div class="space-y-3">
                        ${q.options.map((opt, optIndex) => `
                            <div class="presentation-option p-3 rounded-lg border-2 border-gray-700 text-gray-300 font-lato flex items-center gap-3" data-correct="${opt.correct}">
                                <span class="font-bold text-lg text-pink-400">${String.fromCharCode(65 + optIndex)})</span> ${opt.text}
                            </div>
                        `).join('')}
                    </div>`;
                questionsList.appendChild(questionBlock);
            });
        }
        
        window.revealAnswers = () => {
            const correctOptions = questionsList.querySelectorAll('.presentation-option[data-correct="true"]');
            correctOptions.forEach(opt => {
                opt.classList.add('border-green-500/50', 'bg-green-500/10');
                opt.innerHTML += `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" fill="currentColor" class="w-5 h-5 text-green-400 ml-auto"><path d="M173.66,98.34a8,8,0,0,1,0,11.32l-48,48a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L120,140.69l42.34-42.35A8,8,0,0,1,173.66,98.34Z"></path></svg>`;
            });
            revealBtn.style.display = 'none';
        };

        // --- Lógica do Quiz Interativo ---
        const quizTopicTitleInteractive = document.getElementById('quiz-topic-title-interactive');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const feedbackMessage = document.getElementById('feedback-message');
        const nextButton = document.getElementById('next-button');
        const resultScore = document.getElementById('result-score');

        function loadInteractiveQuestion() {
            isAnswered = false;
            nextButton.disabled = true;
            nextButton.classList.add('opacity-50', 'cursor-not-allowed');
            nextButton.classList.remove('bg-purple-600', 'hover:bg-purple-700');
            feedbackMessage.innerHTML = '';
            optionsContainer.innerHTML = '';

            const questions = quizQuestions[currentTopic];
            if (currentQuestionIndex >= questions.length) {
                showResults();
                return;
            }

            const currentQ = questions[currentQuestionIndex];
            quizTopicTitleInteractive.textContent = `${currentTopic === 'bioetica' ? 'Bioética' : 'Clonagem'} - Pergunta ${currentQuestionIndex + 1}/${questions.length}`;
            questionText.textContent = currentQ.q;

            currentQ.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'quiz-option p-4 rounded-xl border-2 border-gray-700 text-gray-200 font-lato flex items-center gap-3';
                optionElement.setAttribute('onclick', `checkAnswer(${index}, this)`);
                optionElement.innerHTML = `<span class="font-bold text-lg text-purple-400">${String.fromCharCode(65 + index)})</span> ${option.text}`;
                optionsContainer.appendChild(optionElement);
            });
        }
        
        window.checkAnswer = (selectedIndex, selectedElement) => {
            if (isAnswered) return;
            isAnswered = true;

            const questions = quizQuestions[currentTopic];
            const currentQ = questions[currentQuestionIndex];
            const selectedOption = currentQ.options[selectedIndex];

            Array.from(optionsContainer.children).forEach((el, index) => {
                el.onclick = null;
                el.style.cursor = 'default';
                if (currentQ.options[index].correct) {
                    el.classList.add('correct');
                }
            });

            if (selectedOption.correct) {
                score++;
                feedbackMessage.innerHTML = `<div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" fill="currentColor" class="w-6 h-6 text-green-500"><path d="M173.66,98.34a8,8,0,0,1,0,11.32l-48,48a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L120,140.69l42.34-42.35A8,8,0,0,1,173.66,98.34Z"></path></svg><span class="text-green-500 font-poppins">Resposta Correta!</span></div><p class="text-sm text-gray-300 font-lato mt-2"><span class="font-semibold text-green-400">Explicação:</span> ${selectedOption.reasoning}</p>`;
            } else {
                selectedElement.classList.add('incorrect');
                const correctOpt = currentQ.options.find(o => o.correct);
                feedbackMessage.innerHTML = `<div class="flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" fill="currentColor" class="w-6 h-6 text-red-500"><path d="M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM176,176a8,8,0,0,1-11.31,0L128,141.31l-36.69,36.69a8,8,0,0,1-11.32-11.32L116.69,128,80,91.31A8,8,0,0,1,91.31,80L128,116.69,164.69,80a8,8,0,0,1,11.32,11.32L141.31,128l36.69,36.69A8,8,0,0,1,176,176Z"></path></svg><span class="text-red-500 font-poppins">Incorreto!</span></div><p class="text-sm text-gray-300 font-lato mt-2"><span class="font-semibold text-red-400">Motivo do Erro:</span> ${selectedOption.reasoning}</p><p class="text-sm text-gray-300 font-lato mt-1"><span class="font-semibold text-green-400">Explicação Correta:</span> ${correctOpt.reasoning}</p>`;
            }

            nextButton.disabled = false;
            nextButton.classList.remove('opacity-50', 'cursor-not-allowed');
            nextButton.classList.add('bg-purple-600', 'hover:bg-purple-700');
        };
        
        window.nextQuestion = () => {
            currentQuestionIndex++;
            loadInteractiveQuestion();
        };

        function showResults() {
            quizInteractiveArea.classList.add('hidden');
            resultArea.classList.remove('hidden');
            quizBackButton.classList.add('hidden');
            quizCloseButton.classList.remove('hidden');

            const totalQuestions = quizQuestions[currentTopic].length;
            const percentage = Math.round((score / totalQuestions) * 100);
            resultScore.textContent = `${score}/${totalQuestions} (${percentage}%)`;
        }

        // --- Funções de Inicialização e Animação 3D ---
        window.onload = function() {
            // Scene, camera, and renderer setup
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({
                canvas: document.getElementById('main-3d-canvas'),
                alpha: true,
                antialias: true
            });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setClearColor(0x000000, 0); // Fundo transparente para ver o body

            // Light sources
            const ambientLight = new THREE.AmbientLight(0x404040, 2);
            scene.add(ambientLight);
            const directionalLight = new THREE.DirectionalLight(0xffffff, 1.5);
            directionalLight.position.set(1, 1, 1).normalize();
            scene.add(directionalLight);

            // Create the abstract "Cyber Brain" model
            const createCyberBrain = () => {
                const group = new THREE.Group();
                const mainMaterial = new THREE.MeshStandardMaterial({
                    color: 0x8A2BE2, // Purple
                    emissive: 0x4B0082, // Dark purple emissive
                    roughness: 0.4,
                    metalness: 0.6,
                    transparent: true,
                    opacity: 0.8
                });
                
                const wireframeMaterial = new THREE.LineBasicMaterial({
                    color: 0x8A2BE2,
                    transparent: true,
                    opacity: 0.5
                });
                
                const sphereGeometry = new THREE.IcosahedronGeometry(2, 1);
                const sphereMesh = new THREE.Mesh(sphereGeometry, mainMaterial);
                group.add(sphereMesh);
                
                const wireframe = new THREE.LineSegments(
                    new THREE.EdgesGeometry(sphereGeometry),
                    wireframeMaterial
                );
                group.add(wireframe);

                // Add small, glowing particles
                const particleGeometry = new THREE.SphereGeometry(0.05, 8, 8);
                const particleMaterial = new THREE.MeshBasicMaterial({ color: 0xFFFFFF });
                for (let i = 0; i < 100; i++) {
                    const particle = new THREE.Mesh(particleGeometry, particleMaterial);
                    particle.position.set(
                        (Math.random() - 0.5) * 8,
                        (Math.random() - 0.5) * 8,
                        (Math.random() - 0.5) * 8
                    );
                    group.add(particle);
                }
                
                return group;
            };

            const model = createCyberBrain();
            scene.add(model);
            camera.position.z = 5;

            // Variables for mouse interaction
            let mouseX = 0, mouseY = 0;
            let targetRotationX = 0, targetRotationY = 0;
            const rotationSpeed = 0.05;

            document.addEventListener('mousemove', (event) => {
                mouseX = (event.clientX / window.innerWidth) * 2 - 1;
                mouseY = -(event.clientY / window.innerHeight) * 2 + 1;
                targetRotationY = mouseX * 0.5;
                targetRotationX = mouseY * 0.5;
            }, false);

            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });

            // Animation loop
            const animate = () => {
                requestAnimationFrame(animate);

                // Update model rotation
                model.rotation.x += (targetRotationX - model.rotation.x) * rotationSpeed;
                model.rotation.y += (targetRotationY - model.rotation.y) * rotationSpeed;

                // Add subtle, automatic rotation
                model.rotation.y += 0.001;

                // Animate particles (if they exist)
                if (model.children.length > 2) {
                    for (let i = 2; i < model.children.length; i++) {
                        const particle = model.children[i];
                        particle.position.y -= 0.01;
                        if (particle.position.y < -4) {
                            particle.position.y = 4;
                        }
                    }
                }

                renderer.render(scene, camera);
            };

            animate();

            // --- Funcionalidades do modo de exibição (Tela Cheia) ---
            window.toggleFullscreen = () => {
                const button = document.getElementById('fullscreen-button');
                try {
                    if (!document.fullscreenElement) {
                        document.documentElement.requestFullscreen().then(() => {
                            console.log("Modo de tela cheia ativado com sucesso.");
                        });
                    } else {
                        document.exitFullscreen().then(() => {
                            console.log("Modo de tela cheia desativado com sucesso.");
                        });
                    }
                } catch (e) {
                    console.error("Erro geral na função de tela cheia:", e);
                }
            };

            document.addEventListener('fullscreenchange', () => {
                const button = document.getElementById('fullscreen-button');
                if (button) {
                    if (document.fullscreenElement) {
                        button.textContent = 'Sair da Tela Cheia';
                    } else {
                        button.textContent = 'Entrar em Tela Cheia';
                    }
                }
            });
            
            // Lógica do pré-carregamento e transições
            const loadingScreen = document.getElementById('loading-screen');
            const mainContent = document.getElementById('main-content');
            
            const handleLoad = () => {
                // Remove listeners imediatamente
                document.removeEventListener('keydown', handleLoad);
                document.removeEventListener('click', handleLoad);
                
                // Inicia a transição de saída da tela de carregamento (fade-out)
                loadingScreen.style.opacity = '0';
                
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                    // Revela o conteúdo principal após o fade-out
                    mainContent.style.opacity = '1';
                    mainContent.style.pointerEvents = 'auto';
                }, 1000); // 1000ms corresponde à duração da transição de opacidade no CSS
            };
            
            // Adiciona listeners para iniciar o carregamento
            document.addEventListener('keydown', handleLoad);
            document.addEventListener('click', handleLoad);
        };
    </script>
</body>
</html>


